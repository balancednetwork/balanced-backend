
from balanced_backend.utils.values import extract_indexed_log, extract_non_indexed_log


def test_extract_indexed_log():
    x = extract_indexed_log(
        '["FeePaid(str,int,str)","bnUSD","0x395ed40634fd7f2","origination"]',
        1,
    )
    assert x == "0x395ed40634fd7f2"


def test_extract_non_indexed_log():
    data: str = \
        str(["{1239: {'d': -945083222835344506, 'c': -678180511240212612}, 838: {'d': -397845214119725128, 'c': -285489006879973336}, 4951: {'d': -8765848392046875091, 'c': -6290268835941734569}, 2970: {'d': -4816438747964220353, 'c': -3456219318603468639}, 4953: {'d': -66425697738647313, 'c': -47666292833697024}, 1246: {'d': -55693307228090922, 'c': -39964856698324189}, 1248: {'d': -1296054805810992622, 'c': -930033556371118219}, 1251: {'d': -500812671914522658, 'c': -359377233314553591}, 1258: {'d': -75943926404420253, 'c': -54496460830214050}, 1241: {'d': -58903825251227064, 'c': -42268686352335224}, 947: {'d': -40524946551792612562, 'c': -29080220986279452100}, 4625: {'d': -234742655611567121, 'c': -168448545425373330}, 5272: {'d': -83260956311823715, 'c': -59747074705757737}, 5378: {'d': -82997327612525686, 'c': -59557897877995259}, 5356: {'d': -8054950709158261973, 'c': -5780137090533660402}, 5383: {'d': -270030616104503386, 'c': -193770767330791054}, 5382: {'d': -901396147789192976, 'c': -646831184351832943}, 5385: {'d': -40107776210308462, 'c': -28780864497214715}, 740: {'d': -55998077417266965, 'c': -40183556171251131}, 1536: {'d': -794340585838346357, 'c': -570009382863158602}, 4780: {'d': -23299507895257729, 'c': -16719450514258263}, 1266: {'d': -109517179799843975, 'c': -78588229260297065}, 1254: {'d': -649558600097928, 'c': -466115547129586}, 618: {'d': -7024419969444160505, 'c': -5040640454659270330}, 1276: {'d': -6170534928121672526, 'c': -4427902676787039906}, 1277: {'d': -54450063719098853, 'c': -39072719902164796}, 1280: {'d': -136199628274874016, 'c': -97735237810134760}, 1278: {'d': -1377013901950722632, 'c': -988128843519341493}, 1281: {'d': -77532477262391323, 'c': -55636386084370840}, 1256: {'d': -22510324369427954, 'c': -16153141776490270}, 1283: {'d': -192210909197245084, 'c': -137928268660044135}, 1290: {'d': -6276600173138664, 'c': -4504013838589956}, 1293: {'d': -1729456082999581451, 'c': -1241037172385077153}, 1289: {'d': -1690096615843917310, 'c': -1212793285589912686}, 1292: {'d': -284519743055905090, 'c': -204167992978122126}, 1308: {'d': -2900161859710395450, 'c': -2081121752216767352}, 1316: {'d': -42522989235982946, 'c': -30513992718020420}, 1315: {'d': -3975827570567562931, 'c': -2853006708045441140}, 1318: {'d': -1091571954048340265, 'c': -783299087281497291}, 1298: {'d': -197649823841183688, 'c': -141831169298521341}, 1321: {'d': -170571922328638, 'c': -122400388339361}, 4587: {'d': -9873770370359734, 'c': -7085300506710679}, 3015: {'d': -3507077252916001237, 'c': -2516637039864025035}, 868: {'d': -22856130576191885, 'c': -16401288208917269}, 1331: {'d': -1273660623462055061, 'c': -913963756730991710}, 827: {'d': -3375816671701593005, 'c': -2422446003643309164}, 1337: {'d': -67645671792865135813, 'c': -48541731745105341159}, 1117: {'d': -828388383612624523, 'c': -594441678711019877}, 4515: {'d': -908808387220928, 'c': -652150119452773}, 4523: {'d': -778148839000334767, 'c': -558390377379672277}}","0x24a78f3f84e93f0115dc"])
    x = extract_non_indexed_log(data=data, position=1)
    assert x